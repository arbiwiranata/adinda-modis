a:2:{i:0;a:3:{s:10:"sourceFile";s:75:"D:\laragon\www\adinda-modis\plansys\components\ui\FormFields\DataSource.php";s:4:"file";a:1367:{i:0;s:5:"<?php";i:1;s:0:"";i:2;s:3:"/**";i:3;s:19:" * Class DataSource";i:4;s:16:" * @author rizky";i:5;s:3:" */";i:6;s:36:"class DataSource extends FormField {";i:7;s:0:"";i:8;s:47:"    public static $toolbarName = "Data Source";";i:9;s:49:"    public static $category    = "Data & Tables";";i:10;s:60:"    public static $toolbarIcon = "glyphicon glyphicon-book";";i:11;s:36:"    public $name               = '';";i:12;s:39:"    public $fieldType          = 'sql';";i:13;s:36:"    public $sql                = '';";i:14;s:36:"    public $php                = '';";i:15;s:39:"    public $postData           = 'Yes';";i:16;s:36:"    public $params             = [];";i:17;s:17:"    public $data;";i:18;s:38:"    public $debugSql           = 'No';";i:19;s:38:"    public $enablePaging       = 'No';";i:20;s:36:"    public $pagingSQL          = '';";i:21;s:36:"    public $pagingPHP          = '';";i:22;s:36:"    public $relationTo         = '';";i:23;s:36:"    public $queryParams        = [];";i:24;s:34:"    public $relationCriteria   = [";i:25;s:26:"        'select'    => '',";i:26;s:31:"        'distinct'  => 'false',";i:27;s:27:"        'alias'     => 't',";i:28;s:35:"        'condition' => '{[where]}',";i:29;s:35:"        'order'     => '{[order]}',";i:30;s:36:"        'paging'    => '{[paging]}',";i:31;s:26:"        'group'     => '',";i:32;s:26:"        'having'    => '',";i:33;s:25:"        'join'      => ''";i:34;s:6:"    ];";i:35;s:36:"    public $aggregateGroups    = [];";i:36;s:40:"    public $execMode           = 'auto';";i:37;s:39:"    public $cacheQuery         = 'No'; ";i:38;s:36:"    public $aggregateColumns   = [];";i:39;s:36:"    public $maxAggregateLevel  = 99;";i:40;s:36:"    public $options            = [];";i:41;s:44:"    public $pkCol              = '--auto--';";i:42;s:36:"    private $postedParams      = [];";i:43;s:35:"    private $lastCount         = 0;";i:44;s:21:"    private $command;";i:45;s:24:"    private $dataFilter;";i:46;s:0:"";i:47;s:78:"    public static function querySql($sql, $params, $form = '', $dsname = '') {";i:48;s:29:"        $ds = new DataSource;";i:49;s:0:"";i:50;s:26:"        if ($form != '') {";i:51;s:52:"            $fb          = FormBuilder::load($form);";i:52;s:31:"            $ds->builder = $fb;";i:53;s:0:"";i:54;s:32:"            if ($dsname != '') {";i:55;s:66:"                $field      = $fb->findField(['name' => $dsname]);";i:56;s:47:"                $ds->params = $field['params'];";i:57;s:13:"            }";i:58;s:9:"        }";i:59;s:24:"        $ds->sql = $sql;";i:60;s:35:"        return $ds->query($params);";i:61;s:5:"    }";i:62;s:0:"";i:63;s:7:"    /**";i:64;s:62:"     * @param string $sql parameter query yang akan di-execute";i:65;s:130:"     * @return mixed me-return array kosong jika parameter $sql == "", jika tidak maka akan me-return array data hasil execute SQL";i:66;s:7:"     */";i:67;s:57:"    public function query($params = [], $debug = false) {";i:68;s:29:"        $paramDefs = $params;";i:69;s:62:"        $params    = array_merge($params, $this->queryParams);";i:70;s:8:"        ";i:71;s:35:"        if (trim($this->sql) == "")";i:72;s:22:"            return [];";i:73;s:35:"        $db       = Yii::app()->db;";i:74;s:89:"        $template = DataSource::generateTemplate($this->sql, $params, $this, $paramDefs);";i:75;s:22:"        ## execute SQL";i:76;s:62:"        $this->command = $db->createCommand($template['sql']);";i:77;s:77:"        $data          = $this->command->queryAll(true, $template['params']);";i:78;s:0:"";i:79;s:0:"";i:80;s:21:"        if ($debug) {";i:81;s:72:"            $template['sql'] = [SqlFormatter::format($template['sql'])];";i:82;s:9:"        }";i:83;s:8:"        ";i:84;s:40:"        ## if should count, then count..";i:85;s:36:"        if ($this->lastCount == 0) {";i:86;s:47:"            if ($this->enablePaging == 'Yes') {";i:87;s:85:"                $tc = DataSource::generateTemplate($this->pagingSQL, $params, $this);";i:88;s:0:"";i:89;s:87:"                $count = $db->createCommand($tc['sql'])->queryAll(true, $tc['params']);";i:90;s:40:"                if (count($count) > 0) {";i:91;s:53:"                    $count = array_values($count[0]);";i:92;s:39:"                    $count = $count[0];";i:93;s:24:"                } else {";i:94;s:31:"                    $count = 0;";i:95;s:17:"                }";i:96;s:29:"                if ($debug) {";i:97;s:86:"                    array_unshift($template['sql'], SqlFormatter::format($tc['sql']));";i:98;s:17:"                }";i:99;s:20:"            } else {";i:100;s:38:"                $count = count($data);";i:101;s:13:"            }";i:102;s:16:"        } else {";i:103;s:38:"            $count = $this->lastCount;";i:104;s:0:"";i:105;s:43:"            ## default shouldcount to true;";i:106;s:33:"            $this->lastCount = 0;";i:107;s:9:"        }";i:108;s:0:"";i:109;s:40:"        $template['count']     = $count;";i:110;s:53:"        $template['timestamp'] = date('Y-m-d H:i:s');";i:111;s:8:"        ";i:112;s:8:"        ";i:113;s:22:"        ## return data";i:114;s:16:"        return [";i:115;s:29:"            'data'  => $data,";i:116;s:30:"            'count' => $count,";i:117;s:33:"            'debug' => $template,";i:118;s:10:"        ];";i:119;s:5:"    }";i:120;s:4:"    ";i:121;s:64:"    private static function processSubBlock($rawBlock,$params) {";i:122;s:80:"        preg_match_all(Helper::nestedParensRegex('{', '}'), $rawBlock, $blocks);";i:123;s:8:"        ";i:124;s:48:"        $returnParams = $params['returnParams'];";i:125;s:52:"        if (empty($blocks[1])) { return $rawBlock; }";i:126;s:8:"        ";i:127;s:40:"        foreach ($blocks[1] as $block) {";i:128;s:33:"            $renderBlock = false;";i:129;s:12:"            ";i:130;s:68:"            preg_match_all("/\:[\w\d_]+/", $block, $attachedParams);";i:131;s:12:"            ";i:132;s:48:"            if (count($attachedParams[0]) > 0) {";i:133;s:30:"                $inParams = 0;";i:134;s:53:"                foreach ($attachedParams[0] as $ap) {";i:135;s:80:"                    if (isset($returnParams[$ap]) && $returnParams[$ap] != "") {";i:136;s:36:"                        $inParams++;";i:137;s:24:"                        ";i:138;s:88:"                        ## if current params is an ARRAY then convert to multiple params";i:139;s:89:"                        if (is_array($returnParams[$ap]) && !empty($returnParams[$ap])) {";i:140;s:49:"                            $newParamString = [];";i:141;s:75:"                            foreach ($returnParams[$ap] as $rpIdx => $rp) {";i:142;s:75:"                                $rpKey                = $ap . "_" . $rpIdx;";i:143;s:63:"                                $newParamString[]     = $rpKey;";i:144;s:60:"                                $returnParams[$rpKey] = $rp;";i:145;s:29:"                            }";i:146;s:54:"                            unset($returnParams[$ap]);";i:147;s:123:"                            $bracket['sql'] = Helper::strReplaceFirst($ap, implode(",", $newParamString), $bracket['sql']);";i:148;s:25:"                        }";i:149;s:21:"                    }";i:150;s:17:"                }";i:151;s:16:"                ";i:152;s:16:"                ";i:153;s:58:"                if ($inParams >= count($attachedParams)) {";i:154;s:40:"                    $renderBlock = true;";i:155;s:17:"                }";i:156;s:13:"            }";i:157;s:12:"            ";i:158;s:32:"            if (!$renderBlock) {";i:159;s:75:"                $rawBlock = str_replace("{" . $block . "}", "", $rawBlock);";i:160;s:20:"            } else {";i:161;s:79:"                $rawBlock = str_replace("{" . $block . "}", $block, $rawBlock);";i:162;s:13:"            }";i:163;s:9:"        }";i:164;s:8:"        ";i:165;s:25:"        return $rawBlock;";i:166;s:8:"        ";i:167;s:5:"    }";i:168;s:0:"";i:169;s:96:"    public static function generateTemplate($sql, $postedParams = [], $field, $paramDefs = []) {";i:170;s:27:"        $returnParams = [];";i:171;s:8:"        ";i:172;s:26:"        ## find all params";i:173;s:81:"        preg_match_all("/(\:[\w\d_]+\[allownull])|(\:[\w\d_]+)/", $sql, $params);";i:174;s:28:"        $originalSql = $sql;";i:175;s:37:"        $model       = $field->model;";i:176;s:8:"        ";i:177;s:44:"        foreach ($params[0] as $idx => $p) {";i:178;s:31:"            $allowNull = false;";i:179;s:52:"            if(strpos($p, '[allownull]') !== false )";i:180;s:13:"            {";i:181;s:54:"                $p = str_replace('[allownull]','',$p);";i:182;s:34:"                $allowNull = true;";i:183;s:13:"            }";i:184;s:12:"            ";i:185;s:12:"            ";i:186;s:54:"            if (array_key_exists($p, $postedParams)) {";i:187;s:52:"                if (is_numeric($postedParams[$p])) {";i:188;s:58:"                    $returnParams[$p] = $postedParams[$p];";i:189;s:17:"                }";i:190;s:21:"                else ";i:191;s:17:"                {";i:192;s:20:"                    ";i:193;s:101:"                    if (is_string($postedParams[$p]) || (is_null($postedParams[$p]) && $allowNull)) {";i:194;s:145:"                        $isJs = strpos($postedParams[$p], 'js:') !== false || (isset($paramDefs[$p]) && strpos($paramDefs[$p], 'js:') !== false);";i:195;s:0:"";i:196;s:109:"                        if (!$isJs && isset($field->params[$p]) && strpos($field->params[$p], 'js:') === 0) {";i:197;s:41:"                            $isJs = true;";i:198;s:25:"                        }";i:199;s:0:"";i:200;s:36:"                        if ($isJs) {";i:201;s:28:"                            ";i:202;s:56:"                            switch (get_class($field)) {";i:203;s:50:"                                case "DataSource":";i:204;s:81:"                                    $returnParams[$p] = @$field->queryParams[$p];";i:205;s:42:"                                    break;";i:206;s:40:"                                default:";i:207;s:59:"                                    $returnParams[$p] = '';";i:208;s:42:"                                    break;";i:209;s:29:"                            }";i:210;s:32:"                        } else {";i:211;s:59:"                            $postParam = $postedParams[$p];";i:212;s:28:"                            ";i:213;s:68:"                            if (stripos($postParam, 'php:') === 0) {";i:214;s:67:"                                $postParam = substr($postParam, 4);";i:215;s:29:"                            }";i:216;s:94:"                            if ((is_string($postParam) && $postParam != "") || ($allowNull)) {";i:217;s:88:"                                $returnParams[$p] = $field->evaluate($postParam, true, [";i:218;s:54:"                                    'model' => $model,";i:219;s:89:"                                    'params' => @$field->builder->renderOptions['params']";i:220;s:35:"                                ]);";i:221;s:29:"                            }";i:222;s:25:"                        }";i:223;s:90:"                    } else if (is_array($postedParams[$p]) && !empty($postedParams[$p])) {";i:224;s:62:"                        $returnParams[$p] = $postedParams[$p];";i:225;s:45:"                        $params[0][$idx]  = [";i:226;s:43:"                            'name'   => $p,";i:227;s:64:"                            'length' => count($postedParams[$p])";i:228;s:26:"                        ];";i:229;s:21:"                    }";i:230;s:17:"                }";i:231;s:13:"            }";i:232;s:9:"        }";i:233;s:77:"        preg_match_all( Helper::nestedParensRegex('{', '}'), $sql, $blocks );";i:234;s:40:"        foreach ($blocks[1] as $block) {";i:235;s:76:"            if (strtolower($block) == "and" || strtolower($block) == "or") {";i:236;s:25:"                continue;";i:237;s:13:"            }";i:238;s:12:"            ";i:239;s:36:"            $originalBlock = $block;";i:240;s:58:"            $block = DataSource::processSubBlock($block, [";i:241;s:48:"                'postedParams' => $postedParams,";i:242;s:47:"                'returnParams' => $returnParams";i:243;s:15:"            ]);";i:244;s:73:"            $sql = str_replace("{{$originalBlock}}", "{{$block}}", $sql);";i:245;s:12:"            ";i:246;s:84:"            $bracket = DataSource::processSQLBracket($block, $postedParams, $field);";i:247;s:0:"";i:248;s:35:"            $renderBracket = false;";i:249;s:44:"            if (isset($bracket['render'])) {";i:250;s:52:"                $renderBracket = $bracket['render'];";i:251;s:13:"            }";i:252;s:12:"            ";i:253;s:12:"            ";i:254;s:76:"            foreach ($bracket['params'] as $bracketParam => $bracketValue) {";i:255;s:74:"                if (is_array($bracketValue) && count($bracketValue) > 0) {";i:256;s:42:"                    $renderBracket = true;";i:257;s:57:"                    foreach ($bracketValue as $k => $p) {";i:258;s:47:"                        $returnParams[$k] = $p;";i:259;s:21:"                    }";i:260;s:17:"                }";i:261;s:13:"            }";i:262;s:12:"            ";i:263;s:47:"            ## check if there is another params";i:264;s:77:"            preg_match_all("/\:[\w\d_]+/", $bracket['sql'], $attachedParams);";i:265;s:12:"            ";i:266;s:31:"            $allowNull = false;";i:267;s:54:"            if(isset($bracket['params']['allownull']))";i:268;s:34:"                $allowNull = true;";i:269;s:12:"            ";i:270;s:16:"                ";i:271;s:48:"            if (count($attachedParams[0]) > 0) {";i:272;s:30:"                $inParams = 0;";i:273;s:53:"                foreach ($attachedParams[0] as $ap) {";i:274;s:96:"                    if (isset($returnParams[$ap]) && ($returnParams[$ap] != "") || $allowNull) {";i:275;s:36:"                        $inParams++;";i:276;s:88:"                        ## if current params is an ARRAY then convert to multiple params";i:277;s:89:"                        if (is_array($returnParams[$ap]) && !empty($returnParams[$ap])) {";i:278;s:49:"                            $newParamString = [];";i:279;s:75:"                            foreach ($returnParams[$ap] as $rpIdx => $rp) {";i:280;s:75:"                                $rpKey                = $ap . "_" . $rpIdx;";i:281;s:63:"                                $newParamString[]     = $rpKey;";i:282;s:60:"                                $returnParams[$rpKey] = $rp;";i:283;s:29:"                            }";i:284;s:54:"                            unset($returnParams[$ap]);";i:285;s:123:"                            $bracket['sql'] = Helper::strReplaceFirst($ap, implode(",", $newParamString), $bracket['sql']);";i:286;s:25:"                        }";i:287;s:24:"                        ";i:288;s:69:"                        if($allowNull && is_null($returnParams[$ap]))";i:289;s:25:"                        {";i:290;s:114:"                            $bracket['sql'] = str_replace(array("=",$p),array(" IS ", " NULL "), $bracket['sql']);";i:291;s:25:"                        }";i:292;s:21:"                    }";i:293;s:17:"                }";i:294;s:16:"                ";i:295;s:58:"                if ($inParams >= count($attachedParams)) {";i:296;s:42:"                    $renderBracket = true;";i:297;s:17:"                }";i:298;s:16:"            }   ";i:299;s:33:"            if ($renderBracket) {";i:300;s:54:"                if (strtolower($block) == '[where]') {";i:301;s:65:"                    $isNotFirst = strpos($sql, "{{$block}}") > 0;";i:302;s:61:"                    $isSelect = stripos($sql, "select") == 0;";i:303;s:20:"                    ";i:304;s:92:"                    if (!$isSelect && $isNotFirst && stripos($bracket['sql'], 'where') == 0)";i:305;s:79:"                        $bracket['sql'] = " AND " . substr($bracket['sql'], 5);";i:306;s:17:"                }";i:307;s:72:"                $sql = str_replace("{{$block}}", $bracket['sql'], $sql);";i:308;s:16:"                ";i:309;s:20:"            } else {";i:310;s:59:"                $sql = str_replace("{{$block}}", "", $sql);";i:311;s:13:"            }";i:312;s:12:"            ";i:313;s:9:"        }";i:314;s:44:"        ## concat 'WHERE' sql with operators";i:315;s:25:"        if ($sql != "") {";i:316;s:54:"            $sql = DataSource::concatSql($sql, "AND");";i:317;s:53:"            $sql = DataSource::concatSql($sql, "OR");";i:318;s:9:"        }";i:319;s:12:"            ";i:320;s:39:"        ## remove uneeded return params";i:321;s:50:"        preg_match_all("/\:[\w\d_]+/", $sql, $cp);";i:322;s:45:"        foreach ($returnParams as $k => $p) {";i:323;s:89:"            if (!in_array($k, $cp[0]) && ($k[0] != ":" && !in_array(':' . $k, $cp[0]))) {";i:324;s:41:"                unset($returnParams[$k]);";i:325;s:13:"            }";i:326;s:0:"";i:327;s:105:"            if ((is_null($p) && strpos(@$postedParams[$k], "js:") === 0) || strpos($sql, $k) === false) {";i:328;s:41:"                unset($returnParams[$k]);";i:329;s:13:"            }";i:330;s:9:"        }";i:331;s:16:"        return [";i:332;s:35:"            'sql'    => trim($sql),";i:333;s:37:"            'params' => $returnParams";i:334;s:10:"        ];";i:335;s:5:"    }";i:336;s:0:"";i:337;s:66:"    // HANYA MEMPROSES SQL BRACKET []!! TIDAK MEMPROSES PARAMETERS";i:338;s:78:"    protected static function processSQLBracket($sql, $postedParams, $field) {";i:339;s:54:"        preg_match_all("/\[(.*?)\]/", $sql, $matches);";i:340;s:30:"        $params = $matches[1];";i:341;s:21:"        $parsed = [];";i:342;s:0:"";i:343;s:37:"        foreach ($params as $param) {";i:344;s:33:"            $template     = $sql;";i:345;s:49:"            $paramOptions = explode("|", $param);";i:346;s:55:"            $param        = array_shift($paramOptions);";i:347;s:0:"";i:348;s:178:"            if (($param != "order" && $param != "!order" && $param != "where" && $param != "paging") && (!isset($field->params[$param]) && !isset($field->queryParams[$param]))) {";i:349;s:70:"                $sql            = str_replace("[{$param}]", "", $sql);";i:350;s:37:"                $parsed[$param] = "";";i:351;s:25:"                continue;";i:352;s:13:"            }";i:353;s:0:"";i:354;s:0:"";i:355;s:29:"            switch ($param) {";i:356;s:29:"                case "where":";i:357;s:108:"                    $fieldSql = 'DataFilter::generateParams($paramName, $params, $template, $paramOptions)';";i:358;s:26:"                    break;";i:359;s:29:"                case "order":";i:360;s:30:"                case "!order":";i:361;s:30:"                case "paging":";i:362;s:45:"                    if ($param == "!order") {";i:363;s:41:"                        $param = "order";";i:364;s:21:"                    }";i:365;s:0:"";i:366;s:106:"                    $fieldSql = 'DataGrid::generateParams($paramName, $params, $template, $paramOptions)';";i:367;s:26:"                    break;";i:368;s:24:"                default:";i:369;s:95:"                    $ff       = $field->builder->findField(['name' => $field->params[$param]]);";i:370;s:61:"                    $fieldSql = @$ff['options']['ps-ds-sql'];";i:371;s:26:"                    break;";i:372;s:13:"            }";i:373;s:0:"";i:374;s:0:"";i:375;s:35:"            if (isset($fieldSql)) {";i:376;s:63:"                $template = $field->evaluate($fieldSql, true, [";i:377;s:45:"                    'paramName'    => $param,";i:378;s:61:"                    'params'       => @$postedParams[$param],";i:379;s:48:"                    'template'     => $template,";i:380;s:51:"                    'paramOptions' => $paramOptions";i:381;s:19:"                ]);";i:382;s:60:"                if (!isset($template['generateTemplate'])) {";i:383;s:77:"                    $sql = str_replace("[{$param}]", $template['sql'], $sql);";i:384;s:24:"                } else {";i:385;s:44:"                    $sql = $template['sql'];";i:386;s:17:"                }";i:387;s:0:"";i:388;s:45:"                if ($template['sql'] != '') {";i:389;s:58:"                    $parsed[$param] = $template['params'];";i:390;s:17:"                }";i:391;s:0:"";i:392;s:49:"                if (isset($template['render'])) {";i:393;s:97:"                    return ['sql' => $sql, 'params' => $parsed, 'render' => $template['render']];";i:394;s:17:"                }";i:395;s:13:"            }";i:396;s:9:"        }";i:397;s:52:"        return ['sql' => $sql, 'params' => $parsed];";i:398;s:5:"    }";i:399;s:0:"";i:400;s:55:"    public static function concatSql($sql, $operator) {";i:401;s:92:"        $andsql = array_filter(preg_split("/\{" . $operator . "\}/i", $sql), function ($e) {";i:402;s:55:"            return (trim($e) != "" ? trim($e) : false);";i:403;s:11:"        });";i:404;s:0:"";i:405;s:55:"        $sql = implode(" " . $operator . " ", $andsql);";i:406;s:0:"";i:407;s:28:"        ## clean where where";i:408;s:89:"        $sql = preg_replace("/\s+{$operator}\s+where\s+/i", " " . $operator . " ", $sql);";i:409;s:77:"        $sql = preg_replace("/\s+where\s+{$operator}\s+/i", " WHERE ", $sql);";i:410;s:71:"        $sql = preg_replace("/\s+where\s+where\s+/i", " WHERE ", $sql);";i:411;s:0:"";i:412;s:24:"        ## clean and and";i:413;s:95:"        $sql = preg_replace("/\s+{$operator}\s+{$operator}\s+/i", " " . $operator . " ", $sql);";i:414;s:0:"";i:415;s:22:"        ## clean ( AND";i:416;s:70:"        $sql = preg_replace("/\s*\(\s+{$operator}\s+/i", " ( ", $sql);";i:417;s:70:"        $sql = preg_replace("/\s+{$operator}\s+\)\s+/i", " ) ", $sql);";i:418;s:20:"        return $sql;";i:419;s:5:"    }";i:420;s:0:"";i:421;s:7:"    /**";i:422;s:73:"     * @return array Fungsi ini akan me-return array property DataSource.";i:423;s:7:"     */";i:424;s:42:"    public function getFieldProperties() {";i:425;s:22:"        return array (";i:426;s:19:"            array (";i:427;s:46:"                'label' => 'Data Source Name',";i:428;s:33:"                'name' => 'name',";i:429;s:36:"                'labelWidth' => '5',";i:430;s:36:"                'fieldWidth' => '7',";i:431;s:36:"                'options' => array (";i:432;s:48:"                    'ng-model' => 'active.name',";i:433;s:56:"                    'ng-change' => 'changeActiveName()',";i:434;s:40:"                    'ng-delay' => '500',";i:435;s:18:"                ),";i:436;s:38:"                'type' => 'TextField',";i:437;s:14:"            ),";i:438;s:19:"            array (";i:439;s:41:"                'label' => 'Post Data ?',";i:440;s:37:"                'name' => 'postData',";i:441;s:36:"                'options' => array (";i:442;s:52:"                    'ng-model' => 'active.postData',";i:443;s:44:"                    'ng-change' => 'save()',";i:444;s:18:"                ),";i:445;s:54:"                'listExpr' => 'array(\'Yes\',\'No\')',";i:446;s:36:"                'labelWidth' => '5',";i:447;s:36:"                'fieldWidth' => '4',";i:448;s:41:"                'type' => 'DropDownList',";i:449;s:14:"            ),";i:450;s:19:"            array (";i:451;s:46:"                'label' => 'Post Relation To',";i:452;s:39:"                'name' => 'relationTo',";i:453;s:36:"                'options' => array (";i:454;s:54:"                    'ng-model' => 'active.relationTo',";i:455;s:44:"                    'ng-change' => 'save()',";i:456;s:48:"                    'ps-list' => 'relFieldList',";i:457;s:60:"                    'ng-if' => 'active.postData == \'Yes\'',";i:458;s:18:"                ),";i:459;s:35:"                'list' => array (),";i:460;s:36:"                'labelWidth' => '5',";i:461;s:36:"                'fieldWidth' => '7',";i:462;s:38:"                'searchable' => 'Yes',";i:463;s:45:"                'otherLabel' => '-- NONE --',";i:464;s:41:"                'type' => 'DropDownList',";i:465;s:14:"            ),";i:466;s:19:"            array (";i:467;s:33:"                'type' => 'Text',";i:468;s:73:"                'value' => '<hr ng-if=\\"active.postData == \'Yes\'\\">',";i:469;s:14:"            ),";i:470;s:19:"            array (";i:471;s:41:"                'label' => 'Debug SQL ?',";i:472;s:37:"                'name' => 'debugSql',";i:473;s:36:"                'options' => array (";i:474;s:52:"                    'ng-model' => 'active.debugSql',";i:475;s:44:"                    'ng-change' => 'save()',";i:476;s:18:"                ),";i:477;s:54:"                'listExpr' => 'array(\'Yes\',\'No\')',";i:478;s:36:"                'labelWidth' => '5',";i:479;s:36:"                'fieldWidth' => '4',";i:480;s:41:"                'type' => 'DropDownList',";i:481;s:14:"            ),";i:482;s:19:"            array (";i:483;s:41:"                'label' => 'Source Type',";i:484;s:38:"                'name' => 'fieldType',";i:485;s:36:"                'options' => array (";i:486;s:53:"                    'ng-model' => 'active.fieldType',";i:487;s:44:"                    'ng-change' => 'save()',";i:488;s:88:"                    'ng-if' => 'active.relationTo == \'\' || active.postData == \'No\'',";i:489;s:18:"                ),";i:490;s:33:"                'list' => array (";i:491;s:35:"                    'sql' => 'SQL',";i:492;s:51:"                    'phpsql' => 'PHP (Return SQL)',";i:493;s:50:"                    'php' => 'PHP (Return Array)',";i:494;s:18:"                ),";i:495;s:36:"                'labelWidth' => '5',";i:496;s:36:"                'fieldWidth' => '6',";i:497;s:41:"                'type' => 'DropDownList',";i:498;s:14:"            ),";i:499;s:19:"            array (";i:500;s:36:"                'label' => 'Paging',";i:501;s:41:"                'name' => 'enablePaging',";i:502;s:36:"                'options' => array (";i:503;s:56:"                    'ng-model' => 'active.enablePaging',";i:504;s:44:"                    'ng-change' => 'save()',";i:505;s:88:"                    'ng-if' => 'active.relationTo == \'\' || active.postData == \'No\'',";i:506;s:18:"                ),";i:507;s:54:"                'listExpr' => 'array(\'Yes\',\'No\')',";i:508;s:36:"                'labelWidth' => '5',";i:509;s:36:"                'fieldWidth' => '4',";i:510;s:41:"                'type' => 'DropDownList',";i:511;s:14:"            ),";i:512;s:19:"            array (";i:513;s:45:"                'name' => 'relationCriteria',";i:514;s:44:"                'label' => 'Relation Query',";i:515;s:42:"                'paramsField' => 'params',";i:516;s:44:"                'baseClass' => 'DataSource',";i:517;s:36:"                'options' => array (";i:518;s:89:"                    'ng-if' => 'active.postData == \'Yes\' && active.relationTo != \'\'',";i:519;s:60:"                    'ng-model' => 'active.relationCriteria',";i:520;s:44:"                    'ng-change' => 'save()',";i:521;s:18:"                ),";i:522;s:68:"                'modelClassJS' => 'DataSource/relation-criteria.js',";i:523;s:40:"                'type' => 'SqlCriteria',";i:524;s:14:"            ),";i:525;s:19:"            array (";i:526;s:33:"                'label' => 'SQL',";i:527;s:37:"                'fieldname' => 'sql',";i:528;s:36:"                'language' => 'sql',";i:529;s:36:"                'options' => array (";i:530;s:123:"                    'ng-show' => 'active.fieldType == \'sql\' && (active.relationTo == \'\' || active.postData == \'No\')',";i:531;s:44:"                    'ps-valid' => 'save();',";i:532;s:18:"                ),";i:533;s:44:"                'type' => 'ExpressionField',";i:534;s:14:"            ),";i:535;s:19:"            array (";i:536;s:42:"                'label' => 'PHP Function',";i:537;s:37:"                'fieldname' => 'php',";i:538;s:36:"                'options' => array (";i:539;s:159:"                    'ng-show' => '(active.fieldType == \'php\' || active.fieldType == \'phpsql\') && (active.relationTo == \'\' || active.postData == \'No\')',";i:540;s:44:"                    'ps-valid' => 'save();',";i:541;s:18:"                ),";i:542;s:62:"                'desc' => 'ex: Model::yourFunction($params);',";i:543;s:44:"                'type' => 'ExpressionField',";i:544;s:14:"            ),";i:545;s:19:"            array (";i:546;s:55:"                'label' => 'Total Item - PHP Function',";i:547;s:43:"                'fieldname' => 'pagingPHP',";i:548;s:36:"                'options' => array (";i:549;s:193:"                    'ng-show' => '(active.fieldType == \'php\' || active.fieldType == \'phpsql\') && active.enablePaging == \'Yes\' && (active.relationTo == \'\' || active.postData == \'No\')',";i:550;s:44:"                    'ps-valid' => 'save();',";i:551;s:18:"                ),";i:552;s:62:"                'desc' => 'ex: Model::yourFunction($params);',";i:553;s:44:"                'type' => 'ExpressionField',";i:554;s:14:"            ),";i:555;s:19:"            array (";i:556;s:46:"                'label' => 'Total Item - SQL',";i:557;s:43:"                'fieldname' => 'pagingSQL',";i:558;s:36:"                'language' => 'sql',";i:559;s:36:"                'options' => array (";i:560;s:157:"                    'ng-show' => 'active.fieldType == \'sql\' && active.enablePaging == \'Yes\' && (active.relationTo == \'\' || active.postData == \'No\')',";i:561;s:44:"                    'ps-valid' => 'save();',";i:562;s:18:"                ),";i:563;s:44:"                'type' => 'ExpressionField',";i:564;s:14:"            ),";i:565;s:19:"            array (";i:566;s:40:"                'label' => 'Parameters',";i:567;s:35:"                'name' => 'params',";i:568;s:33:"                'show' => 'Show',";i:569;s:41:"                'type' => 'KeyValueGrid',";i:570;s:14:"            ),";i:571;s:19:"            array (";i:572;s:42:"                'title' => 'Optimization',";i:573;s:42:"                'type' => 'SectionHeader',";i:574;s:14:"            ),";i:575;s:19:"            array (";i:576;s:33:"                'type' => 'Text',";i:577;s:65:"                'value' => '<div style=\\"height:5px;\\"></div>',";i:578;s:14:"            ),";i:579;s:19:"            array (";i:580;s:37:"                'label' => 'Execute',";i:581;s:37:"                'name' => 'execMode',";i:582;s:36:"                'options' => array (";i:583;s:52:"                    'ng-model' => 'active.execMode',";i:584;s:44:"                    'ng-change' => 'save()',";i:585;s:18:"                ),";i:586;s:42:"                'menuPos' => 'pull-right',";i:587;s:32:"                'listExpr' => '[";i:588;s:32:"  \'auto\' => \'Automatically\',";i:589;s:21:"  \'---\' => \'---\',";i:590;s:50:"  \'before\' => \'Before Render + Param Changed\',";i:591;s:48:"  \'after\' => \'After Render + Param Changed\',";i:592;s:20:"  \'--\' => \'---\',";i:593;s:37:"  \'manual\' => \'Manually (via JS)\'";i:594;s:3:"]',";i:595;s:36:"                'labelWidth' => '3',";i:596;s:36:"                'fieldWidth' => '9',";i:597;s:41:"                'type' => 'DropDownList',";i:598;s:14:"            ),";i:599;s:19:"            array (";i:600;s:35:"                'label' => 'Cache',";i:601;s:39:"                'name' => 'cacheQuery',";i:602;s:36:"                'options' => array (";i:603;s:54:"                    'ng-model' => 'active.cacheQuery',";i:604;s:44:"                    'ng-change' => 'save()',";i:605;s:18:"                ),";i:606;s:32:"                'listExpr' => '[";i:607;s:10:"   \'No\',";i:608;s:10:"   \'Yes\'";i:609;s:3:"]',";i:610;s:36:"                'labelWidth' => '3',";i:611;s:36:"                'fieldWidth' => '3',";i:612;s:41:"                'type' => 'DropDownList',";i:613;s:14:"            ),";i:614;s:19:"            array (";i:615;s:48:"                'label' => 'Datasource Options',";i:616;s:36:"                'name' => 'options',";i:617;s:33:"                'show' => 'Show',";i:618;s:41:"                'type' => 'KeyValueGrid',";i:619;s:14:"            ),";i:620;s:19:"            array (";i:621;s:33:"                'type' => 'Text',";i:622;s:93:"                'value' => '<div ng-if=\'active.postData == \"Yes\" && !!active.relationTo\'>";i:623;s:4:"    ";i:624;s:87:"    <div ng-init=\"active.$showGrouping = active.aggregateGroups.length == 0\"></div>',";i:625;s:14:"            ),";i:626;s:19:"            array (";i:627;s:73:"                'title' => 'Grouping: {{ active.aggregateGroups.length }}";i:628;s:13:"    item(s)',";i:629;s:42:"                'type' => 'SectionHeader',";i:630;s:14:"            ),";i:631;s:19:"            array (";i:632;s:34:"                'label' => 'Hide',";i:633;s:39:"                'icon' => 'chevron-up',";i:634;s:38:"                'position' => 'right',";i:635;s:41:"                'buttonSize' => 'btn-xs',";i:636;s:36:"                'options' => array (";i:637;s:81:"                    'ng-click' => 'active.$showGrouping = !active.$showGrouping',";i:638;s:51:"                    'style' => 'margin-top:-25px;',";i:639;s:54:"                    'ng-if' => 'active.$showGrouping',";i:640;s:18:"                ),";i:641;s:39:"                'type' => 'LinkButton',";i:642;s:14:"            ),";i:643;s:19:"            array (";i:644;s:34:"                'label' => 'Edit',";i:645;s:41:"                'icon' => 'chevron-down',";i:646;s:38:"                'position' => 'right',";i:647;s:41:"                'buttonSize' => 'btn-xs',";i:648;s:36:"                'options' => array (";i:649;s:81:"                    'ng-click' => 'active.$showGrouping = !active.$showGrouping',";i:650;s:51:"                    'style' => 'margin-top:-25px;',";i:651;s:55:"                    'ng-if' => '!active.$showGrouping',";i:652;s:18:"                ),";i:653;s:39:"                'type' => 'LinkButton',";i:654;s:14:"            ),";i:655;s:19:"            array (";i:656;s:33:"                'type' => 'Text',";i:657;s:95:"                'value' => '<div ng-if=\\"active.$showGrouping\\" style=\\"margin-top:5px\\">',";i:658;s:14:"            ),";i:659;s:19:"            array (";i:660;s:50:"                'label' => 'Max. Aggregate Level',";i:661;s:46:"                'name' => 'maxAggregateLevel',";i:662;s:36:"                'labelWidth' => '7',";i:663;s:36:"                'fieldWidth' => '5',";i:664;s:37:"                'postfix' => 'level',";i:665;s:36:"                'options' => array (";i:666;s:61:"                    'ng-model' => 'active.maxAggregateLevel',";i:667;s:40:"                    'ng-delay' => '500',";i:668;s:45:"                    'ng-change' => 'save();',";i:669;s:39:"                    'ng-if' => 'false',";i:670;s:18:"                ),";i:671;s:41:"                'labelOptions' => array (";i:672;s:50:"                    'style' => 'text-align:left;',";i:673;s:18:"                ),";i:674;s:38:"                'type' => 'TextField',";i:675;s:14:"            ),";i:676;s:19:"            array (";i:677;s:44:"                'name' => 'aggregateGroups',";i:678;s:42:"                'fieldTemplate' => 'form',";i:679;s:98:"                'templateForm' => 'application.components.ui.FormFields.DataSourceAggregateGroup',";i:680;s:36:"                'options' => array (";i:681;s:59:"                    'ng-model' => 'active.aggregateGroups',";i:682;s:44:"                    'ng-change' => 'save()',";i:683;s:18:"                ),";i:684;s:35:"                'sortable' => 'No',";i:685;s:45:"                'singleViewOption' => array (";i:686;s:36:"                    'name' => 'val',";i:687;s:42:"                    'fieldType' => 'text',";i:688;s:38:"                    'labelWidth' => 0,";i:689;s:39:"                    'fieldWidth' => 12,";i:690;s:45:"                    'fieldOptions' => array (";i:691;s:42:"                        'ng-delay' => 500,";i:692;s:22:"                    ),";i:693;s:18:"                ),";i:694;s:37:"                'type' => 'ListView',";i:695;s:14:"            ),";i:696;s:19:"            array (";i:697;s:33:"                'type' => 'Text',";i:698;s:34:"                'value' => '</div>";i:699;s:32:"<div style=\"height:5px\"></div>";i:700;s:51:"<div ng-if=\"active.aggregateGroups.length > 0\">',";i:701;s:14:"            ),";i:702;s:19:"            array (";i:703;s:76:"                'title' => 'Aggregates: {{ active.aggregateColumns.length }}";i:704;s:13:"    item(s)',";i:705;s:42:"                'type' => 'SectionHeader',";i:706;s:14:"            ),";i:707;s:19:"            array (";i:708;s:34:"                'label' => 'Edit',";i:709;s:41:"                'icon' => 'chevron-down',";i:710;s:38:"                'position' => 'right',";i:711;s:41:"                'buttonSize' => 'btn-xs',";i:712;s:36:"                'options' => array (";i:713;s:83:"                    'ng-click' => 'active.$showAggregate = !active.$showAggregate',";i:714;s:51:"                    'style' => 'margin-top:-25px;',";i:715;s:56:"                    'ng-if' => '!active.$showAggregate',";i:716;s:18:"                ),";i:717;s:39:"                'type' => 'LinkButton',";i:718;s:14:"            ),";i:719;s:19:"            array (";i:720;s:34:"                'label' => 'Hide',";i:721;s:39:"                'icon' => 'chevron-up',";i:722;s:38:"                'position' => 'right',";i:723;s:41:"                'buttonSize' => 'btn-xs',";i:724;s:36:"                'options' => array (";i:725;s:83:"                    'ng-click' => 'active.$showAggregate = !active.$showAggregate',";i:726;s:51:"                    'style' => 'margin-top:-25px;',";i:727;s:55:"                    'ng-if' => 'active.$showAggregate',";i:728;s:18:"                ),";i:729;s:39:"                'type' => 'LinkButton',";i:730;s:14:"            ),";i:731;s:19:"            array (";i:732;s:33:"                'type' => 'Text',";i:733;s:96:"                'value' => '<div ng-if=\\"active.$showAggregate\\" style=\\"margin-top:5px\\">',";i:734;s:14:"            ),";i:735;s:19:"            array (";i:736;s:45:"                'name' => 'aggregateColumns',";i:737;s:42:"                'fieldTemplate' => 'form',";i:738;s:96:"                'templateForm' => 'application.components.ui.FormFields.DataSourceAggregateCol',";i:739;s:39:"                'layout' => 'Vertical',";i:740;s:36:"                'options' => array (";i:741;s:60:"                    'ng-model' => 'active.aggregateColumns',";i:742;s:44:"                    'ng-change' => 'save()',";i:743;s:18:"                ),";i:744;s:45:"                'singleViewOption' => array (";i:745;s:36:"                    'name' => 'val',";i:746;s:42:"                    'fieldType' => 'text',";i:747;s:38:"                    'labelWidth' => 0,";i:748;s:39:"                    'fieldWidth' => 12,";i:749;s:45:"                    'fieldOptions' => array (";i:750;s:42:"                        'ng-delay' => 500,";i:751;s:22:"                    ),";i:752;s:18:"                ),";i:753;s:37:"                'type' => 'ListView',";i:754;s:14:"            ),";i:755;s:19:"            array (";i:756;s:33:"                'type' => 'Text',";i:757;s:38:"                'value' => '    </div>";i:758;s:8:"</div>',";i:759;s:14:"            ),";i:760;s:19:"            array (";i:761;s:33:"                'type' => 'Text',";i:762;s:36:"                'value' => '</div>',";i:763;s:14:"            ),";i:764;s:10:"        );";i:765;s:5:"    }";i:766;s:0:"";i:767;s:38:"    public function actionRelClass() {";i:768;s:36:"        Yii::import($_GET['class']);";i:769;s:58:"        $class = Helper::explodeLast(".", $_GET['class']);";i:770;s:0:"";i:771;s:23:"        $relClass = '';";i:772;s:46:"        if (@$_GET['rel'] == 'currentModel') {";i:773;s:31:"            $relClass = $class;";i:774;s:16:"        } else {";i:775;s:35:"            $model    = new $class;";i:776;s:44:"            $rels     = $model->relations();";i:777;s:48:"            $relClass = @$rels[$_GET['rel']][1];";i:778;s:9:"        }";i:779;s:0:"";i:780;s:43:"        echo Helper::classAlias($relClass);";i:781;s:5:"    }";i:782;s:0:"";i:783;s:37:"    public function getPrimaryKey() {";i:784;s:65:"        if ($this->relationTo == '' || $this->postData == 'No') {";i:785;s:24:"            return 'id';";i:786;s:16:"        } else {";i:787;s:54:"            if ($this->relationTo == 'currentModel') {";i:788;s:71:"                return $this->model->metadata->tableSchema->primaryKey;";i:789;s:20:"            } else {";i:790;s:82:"                $rel       = $this->model->metaData->relations[$this->relationTo];";i:791;s:45:"                $className = $rel->className;";i:792;s:54:"                if (class_exists($className, false)) {";i:793;s:81:"                    $pk = $className::model()->metadata->tableSchema->primaryKey;";i:794;s:41:"                    if (is_string($pk)) {";i:795;s:35:"                        return $pk;";i:796;s:21:"                    }";i:797;s:17:"                }";i:798;s:13:"            }";i:799;s:9:"        }";i:800;s:5:"    }";i:801;s:0:"";i:802;s:35:"    public function actionQuery() {";i:803;s:8:"        ";i:804;s:60:"        $postdata        = file_get_contents("php://input");";i:805;s:52:"        $post            = CJSON::decode($postdata);";i:806;s:68:"        $class           = Helper::explodeLast(".", $post['class']);";i:807;s:36:"        Yii::import($post['class']);";i:808;s:63:"        $this->lastCount = @$post['lc'] > 0 ? @$post['lc'] : 0;";i:809;s:0:"";i:810;s:35:"        if (class_exists($class)) {";i:811;s:47:"            $fb    = FormBuilder::load($class);";i:812;s:63:"            $field = $fb->findField(['name' => $post['name']]);";i:813;s:81:"            if ($field['fieldType'] != "php" && method_exists($class, 'model')) {";i:814;s:51:"                if (!is_null(@$post['model_id'])) {";i:815;s:79:"                    $fb->model = $class::model()->findByPk(@$post['model_id']);";i:816;s:17:"                }";i:817;s:0:"";i:818;s:42:"                if (is_null($fb->model)) {";i:819;s:44:"                    $fb->model = new $class;";i:820;s:17:"                }";i:821;s:13:"            }";i:822;s:0:"";i:823;s:40:"            $this->attributes  = $field;";i:824;s:37:"            $this->builder     = $fb;";i:825;s:86:"            $this->queryParams = (is_array(@$post['params']) ? @$post['params'] : []);";i:826;s:12:"            ";i:827;s:37:"            if (@$post['df'] != '') {";i:828;s:76:"                $this->dataFilter = $fb->findField(['name' => $post['df']]);";i:829;s:57:"                if (isset($this->queryParams['where'])) {";i:830;s:34:"                    $filters = [];";i:831;s:72:"                    foreach ($this->dataFilter['filters'] as $k => $v) {";i:832;s:50:"                        $filters[$v['name']] = $v;";i:833;s:21:"                    }";i:834;s:0:"";i:835;s:65:"                    if (is_array(@$this->queryParams['where'])) {";i:836;s:75:"                        foreach ($this->queryParams['where'] as $k => $v) {";i:837;s:0:"";i:838;s:65:"                            ## prevent sql injection, remove mode";i:839;s:81:"                            if (isset($this->queryParams['where'][$k]['mode'])) {";i:840;s:79:"                                unset($this->queryParams['where'][$k]['mode']);";i:841;s:29:"                            }";i:842;s:0:"";i:843;s:54:"                            if (isset($filters[$k])) {";i:844;s:80:"                                if (isset($filters[$k]['options']['colname'])) {";i:845;s:87:"                                    $this->queryParams['where'][$k]['mode']    = 'raw';";i:846;s:116:"                                    $this->queryParams['where'][$k]['colname'] = $filters[$k]['options']['colname'];";i:847;s:33:"                                }";i:848;s:29:"                            }";i:849;s:25:"                        }";i:850;s:21:"                    }";i:851;s:17:"                }";i:852;s:13:"            }";i:853;s:0:"";i:854;s:73:"            if (is_object($this->model) && isset($post['modelParams'])) {";i:855;s:64:"                $this->model->attributes = $post['modelParams'];";i:856;s:13:"            }";i:857;s:0:"";i:858;s:51:"            $isGenerate = isset($post['generate']);";i:859;s:0:"";i:860;s:43:"            if (is_string($this->params)) {";i:861;s:35:"                $this->params = [];";i:862;s:13:"            }";i:863;s:12:"            ";i:864;s:47:"            $debug =  $this->debugSql == 'Yes';";i:865;s:0:"";i:866;s:106:"            if ($this->postData == 'No' || $this->relationTo == '' || $this->relationTo == '-- NONE --') {";i:867;s:36:"                ## without relatedTo";i:868;s:48:"                $this->prepareGeneratedParams();";i:869;s:43:"                switch ($this->fieldType) {";i:870;s:31:"                    case "sql":";i:871;s:72:"                        $data      = $this->query($this->params,$debug);";i:872;s:30:"                        break;";i:873;s:34:"                    case "phpsql":";i:874;s:67:"                        $this->sql = $this->execute($this->params);";i:875;s:73:"                        $data      = $this->query($this->params, $debug);";i:876;s:30:"                        break;";i:877;s:31:"                    case "php":";i:878;s:67:"                        $data      = $this->execute($this->params);";i:879;s:30:"                        break;";i:880;s:17:"                }";i:881;s:20:"            } else {";i:882;s:33:"                ## with relatedTo";i:883;s:70:"                $data = $this->getRelated($this->params, $isGenerate);";i:884;s:13:"            }";i:885;s:0:"";i:886;s:31:"            if (empty($data)) {";i:887;s:26:"                echo "{}";";i:888;s:22:"                die();";i:889;s:13:"            }";i:890;s:0:"";i:891;s:30:"            echo json_encode([";i:892;s:42:"                'data'   => $data['data'],";i:893;s:52:"                'count'  => $data['debug']['count'],";i:894;s:53:"                'params' => $data['debug']['params'],";i:895;s:76:"                'debug'  => ($this->debugSql == 'Yes' ? $data['debug'] : [])";i:896;s:15:"            ]);";i:897;s:9:"        }";i:898;s:5:"    }";i:899;s:0:"";i:900;s:43:"    public function execute($params = []) {";i:901;s:59:"        $params = array_merge($params, $this->queryParams);";i:902;s:8:"        ";i:903;s:40:"        if ($this->php == '') return [];";i:904;s:0:"";i:905;s:51:"        $data = $this->evaluate($this->php, true, [";i:906;s:32:"            'params' => $params,";i:907;s:36:"            'model'  => $this->model";i:908;s:11:"        ]);";i:909;s:0:"";i:910;s:28:"        if(is_array($data)){";i:911;s:38:"            $count     = count($data);";i:912;s:16:"        } else {";i:913;s:27:"            $count     = 0;";i:914;s:9:"        }";i:915;s:8:"        ";i:916;s:37:"        $countFunc = 'count($data);';";i:917;s:43:"        if ($this->enablePaging == 'Yes') {";i:918;s:47:"            if ($this->fieldType == 'phpsql') {";i:919;s:98:"                $this->pagingSQL = $this->evaluate($this->pagingPHP, true, ['params' => $params]);";i:920;s:83:"                $this->pagingSQL = str_replace("{[paging]}", "", $this->pagingSQL);";i:921;s:20:"            } else {";i:922;s:88:"                $count = $this->evaluate($this->pagingPHP, true, ['params' => $params]);";i:923;s:13:"            }";i:924;s:42:"            $countFunc = $this->pagingPHP;";i:925;s:9:"        }";i:926;s:0:"";i:927;s:40:"        if ($this->fieldType == "php") {";i:928;s:20:"            return [";i:929;s:33:"                'data'  => $data,";i:930;s:34:"                'count' => $count,";i:931;s:28:"                'debug' => [";i:932;s:50:"                    'function'      => $this->php,";i:933;s:46:"                    'count'         => $count,";i:934;s:50:"                    'countFunction' => $countFunc,";i:935;s:47:"                    'params'        => $params,";i:936;s:58:"                    'timestamp'     => date('Y-m-d H:i:s')";i:937;s:17:"                ]";i:938;s:14:"            ];";i:939;s:16:"        } else {";i:940;s:25:"            return $data;";i:941;s:9:"        }";i:942;s:5:"    }";i:943;s:0:"";i:944;s:67:"    public function getRelated($params = [], $isGenerate = false) {";i:945;s:65:"        $postedParams = array_merge($params, $this->queryParams);";i:946;s:71:"        $relChanges   = $this->model->getRelChanges($this->relationTo);";i:947;s:100:"        $criteria     = DataSource::generateCriteria($postedParams, $this->relationCriteria, $this);";i:948;s:0:"";i:949;s:35:"        if (@$criteria['params']) {";i:950;s:86:"            $criteria['params'] = array_filter($criteria['params'], function($value) {";i:951;s:78:"                return ($value !== null && $value !== false && $value !== '');";i:952;s:15:"            });";i:953;s:9:"        }";i:954;s:0:"";i:955;s:35:"        $criteriaCount = $criteria;";i:956;s:50:"        if ($this->relationTo == 'currentModel') {";i:957;s:53:"            $tableSchema = $this->model->tableSchema;";i:958;s:56:"            $builder     = $this->model->commandBuilder;";i:959;s:59:"            if (array_key_exists('page', $criteriaCount)) {";i:960;s:101:"                $start                   = ($criteriaCount['page'] - 1) * $criteriaCount['pageSize'];";i:961;s:70:"                $pageSize                = $criteriaCount['pageSize'];";i:962;s:53:"                $criteriaCount['limit']  = $pageSize;";i:963;s:50:"                $criteriaCount['offset'] = $start;";i:964;s:0:"";i:965;s:50:"                unset($criteriaCount['pageSize']);";i:966;s:46:"                unset($criteriaCount['page']);";i:967;s:13:"            }";i:968;s:0:"";i:969;s:104:"            $countCommand = $builder->createCountCommand($tableSchema, new CDbCriteria($criteriaCount));";i:970;s:57:"            $count        = $countCommand->queryScalar();";i:971;s:16:"        } else {";i:972;s:76:"            $rel     = $this->model->metaData->relations[$this->relationTo];";i:973;s:40:"            $fkey    = $rel->foreignKey;";i:974;s:28:"            $useStat = true;";i:975;s:0:"";i:976;s:86:"            if (isset($criteria['condition']) && trim($criteria['condition']) != "") {";i:977;s:33:"                $useStat = false;";i:978;s:13:"            }";i:979;s:0:"";i:980;s:27:"            if ($useStat) {";i:981;s:49:"                if (is_array($rel->foreignKey)) {";i:982;s:47:"                    if (isset($rel->through)) {";i:983;s:86:"                        if (isset($this->model->metaData->relations[$rel->through])) {";i:984;s:85:"                            $relt = $this->model->metaData->relations[$rel->through];";i:985;s:105:"                            if (is_string($relt->foreignKey) && get_class($relt) != 'ManyManyRelation') {";i:986;s:62:"                                $reltClass = $relt->className;";i:987;s:78:"                                $reltTable = $reltClass::model()->tableName();";i:988;s:63:"                                $reltFrom  = $relt->foreignKey;";i:989;s:77:"                                $reltTo    = array_keys($rel->foreignKey)[0];";i:990;s:0:"";i:991;s:78:"                                $fkey = "{$reltTable}({$reltFrom},{$reltTo})";";i:992;s:36:"                            } else {";i:993;s:49:"                                $useStat = false;";i:994;s:29:"                            }";i:995;s:32:"                        } else {";i:996;s:45:"                            $useStat = false;";i:997;s:25:"                        }";i:998;s:28:"                    } else {";i:999;s:41:"                        $useStat = false;";i:1000;s:21:"                    }";i:1001;s:17:"                }";i:1002;s:13:"            }";i:1003;s:0:"";i:1004;s:27:"            if ($useStat) {";i:1005;s:103:"                if (get_class($this->model->metaData->relations[$rel->name]) != 'CBelongsToRelation') {";i:1006;s:150:"                    $this->model->metaData->relations[$rel->name . "__psCount"] = new CStatRelation($rel->name . "__psCount", $rel->className, $fkey);";i:1007;s:133:"                    $count                                                      = $this->model->getRelated($rel->name . "__psCount");";i:1008;s:24:"                } else {";i:1009;s:73:"                    $count = count($this->model->getRelated($rel->name));";i:1010;s:17:"                }";i:1011;s:20:"            } else {";i:1012;s:50:"                unset($criteriaCount['pageSize']);";i:1013;s:46:"                unset($criteriaCount['page']);";i:1014;s:0:"";i:1015;s:60:"                // set special flag for counting in criteria";i:1016;s:90:"                $rclass = $this->model->metaData->relations[$this->relationTo]->className;";i:1017;s:68:"                $rpk    = $rclass::model()->tableSchema->primaryKey;";i:1018;s:37:"                if (is_array($rpk)) {";i:1019;s:35:"                    $rpk = $rpk[0];";i:1020;s:17:"                }";i:1021;s:52:"                $criteriaCount['dsCountCol'] = $rpk;";i:1022;s:0:"";i:1023;s:94:"                $rawCount = $this->model->getRelated($this->relationTo, true, $criteriaCount);";i:1024;s:50:"                $count    = @$rawCount[0]->{$rpk};";i:1025;s:13:"            }";i:1026;s:9:"        }";i:1027;s:0:"";i:1028;s:61:"        if (!empty($this->aggregateGroups) && !$isGenerate) {";i:1029;s:38:"            $criteria['aggregate'] = [";i:1030;s:52:"                'groups'  => $this->aggregateGroups,";i:1031;s:31:"                'columns' => []";i:1032;s:14:"            ];";i:1033;s:0:"";i:1034;s:59:"            foreach ($this->aggregateColumns as $k => $c) {";i:1035;s:64:"                $criteria['aggregate']['columns'][$c['col']] = [";i:1036;s:44:"                    'type' => $c['colType'],";i:1037;s:39:"                    'col'  => $c['col']";i:1038;s:18:"                ];";i:1039;s:0:"";i:1040;s:48:"                if ($c['colType'] == 'custom') {";i:1041;s:94:"                    $criteria['aggregate']['columns'][$c['col']]['custom'] = $c['customType'];";i:1042;s:17:"                }";i:1043;s:13:"            }";i:1044;s:9:"        }";i:1045;s:0:"";i:1046;s:0:"";i:1047;s:76:"        $rawData = $this->model->loadRelation($this->relationTo, $criteria);";i:1048;s:0:"";i:1049;s:40:"        ## cleanup rawData from relation";i:1050;s:50:"        // foreach ($rawData as $dataIdx=>$data) {";i:1051;s:55:"        //     foreach ($data as $fieldIdx => $field) {";i:1052;s:42:"        //         if (is_array($field)) {";i:1053;s:60:"        //             unset($rawData[$dataIdx][$fieldIdx]);";i:1054;s:20:"        //         }";i:1055;s:16:"        //     }";i:1056;s:12:"        // }";i:1057;s:0:"";i:1058;s:50:"        if (count($rawData) == 0 && $isGenerate) {";i:1059;s:54:"            if ($this->relationTo != 'currentModel') {";i:1060;s:54:"                $rels     = $this->model->relations();";i:1061;s:56:"                $relClass = $rels[$this->relationTo][1];";i:1062;s:20:"            } else {";i:1063;s:52:"                $relClass = get_class($this->model);";i:1064;s:13:"            }";i:1065;s:0:"";i:1066;s:72:"            $rawData = [$relClass::model()->getAttributes(true, false)];";i:1067;s:9:"        }";i:1068;s:0:"";i:1069;s:72:"        if ($this->maxAggregateLevel <= count($this->aggregateGroups)) {";i:1070;s:57:"            $max          = $this->maxAggregateLevel - 1;";i:1071;s:48:"            $rawDataCount = count($rawData) - 1;";i:1072;s:53:"            for ($k = $rawDataCount; $k >= 0; $k--) {";i:1073;s:116:"                if (isset($rawData[$k]['$type']) && $rawData[$k]['$type'] == 'a' && $rawData[$k]['$level'] > $max) {";i:1074;s:50:"                    $rawData[$k]['$aggr'] = false;";i:1075;s:17:"                }";i:1076;s:56:"                if ($max == -1 && $rawDataCount == $k) {";i:1077;s:49:"                    $rawData[$k]['$aggr'] = true;";i:1078;s:17:"                }";i:1079;s:13:"            }";i:1080;s:9:"        }";i:1081;s:8:"        ";i:1082;s:19:"        $slog = [];";i:1083;s:39:"        if ($this->debugSql == 'Yes') {";i:1084;s:37:"            $logger=Yii::getLogger();";i:1085;s:45:"            foreach ($logger->logs as $log) {";i:1086;s:86:"                if ($log[1] == 'profile' && $log[2] == 'system.db.CDbCommand.query') {";i:1087;s:58:"                    if (strpos($log[0], 'begin:') === 0) {";i:1088;s:67:"                        $l = explode('<|#-SEPARATOR-#|>', $log[0]);";i:1089;s:68:"                        $slog[] = SqlFormatter::format(trim($l[1]));";i:1090;s:21:"                    }";i:1091;s:17:"                }";i:1092;s:13:"            }";i:1093;s:9:"        }";i:1094;s:8:"        ";i:1095;s:17:"        $data = [";i:1096;s:32:"            'data'  => $rawData,";i:1097;s:24:"            'debug' => [";i:1098;s:35:"                'count'  => $count,";i:1099;s:42:"                'params' => $postedParams,";i:1100;s:38:"                'debug'  => $criteria,";i:1101;s:30:"                'sql' => $slog";i:1102;s:14:"            ],";i:1103;s:24:"            'rel'   => [";i:1104;s:55:"                'insert_data' => $relChanges['insert'],";i:1105;s:55:"                'update_data' => $relChanges['update'],";i:1106;s:55:"                'delete_data' => $relChanges['delete'],";i:1107;s:13:"            ]";i:1108;s:10:"        ];";i:1109;s:0:"";i:1110;s:21:"        return $data;";i:1111;s:5:"    }";i:1112;s:0:"";i:1113;s:79:"    public static function generateCriteria($postedParams, $criteria, $field) {";i:1114;s:87:"        if (isset($criteria['select']) && stripos($criteria['select'], 'php:') === 0) {";i:1115;s:83:"            $criteria['select'] = Helper::evaluate(substr($criteria['select'], 4));";i:1116;s:9:"        }";i:1117;s:0:"";i:1118;s:26:"        ## paging criteria";i:1119;s:51:"        if (@$criteria['paging'] == '{[paging]}') {";i:1120;s:38:"            $criteria['page']     = 1;";i:1121;s:39:"            $criteria['pageSize'] = 25;";i:1122;s:9:"        }";i:1123;s:0:"";i:1124;s:49:"        if (is_array(@$postedParams['paging'])) {";i:1125;s:64:"            if (isset($postedParams['paging']['currentPage'])) {";i:1126;s:75:"                $criteria['page'] = $postedParams['paging']['currentPage'];";i:1127;s:20:"            } else {";i:1128;s:38:"                $criteria['page'] = 1;";i:1129;s:13:"            }";i:1130;s:72:"            $criteria['pageSize'] = $postedParams['paging']['pageSize'];";i:1131;s:9:"        }";i:1132;s:0:"";i:1133;s:25:"        ## order criteria";i:1134;s:73:"        if (isset($criteria['order']) && is_string($criteria['order'])) {";i:1135;s:52:"            $sql               = $criteria['order'];";i:1136;s:91:"            $bracket           = DataSource::generateTemplate($sql, $postedParams, $field);";i:1137;s:78:"            $criteria['order'] = str_replace("order by", "", $bracket['sql']);";i:1138;s:44:"            if (isset($bracket['params'])) {";i:1139;s:58:"                foreach ($bracket['params'] as $k => $p) {";i:1140;s:53:"                    $postedParams['params'][$k] = $p;";i:1141;s:17:"                }";i:1142;s:13:"            }";i:1143;s:9:"        }";i:1144;s:0:"";i:1145;s:29:"        ## condition criteria";i:1146;s:81:"        if (isset($criteria['condition']) && is_string($criteria['condition'])) {";i:1147;s:42:"            $sql = $criteria['condition'];";i:1148;s:0:"";i:1149;s:81:"            $bracket = DataSource::generateTemplate($sql, $postedParams, $field);";i:1150;s:12:"            ";i:1151;s:40:"            if ($bracket['sql'] != '') {";i:1152;s:63:"                if (substr($bracket['sql'], 0, 5) == 'where') {";i:1153;s:72:"                    $criteria['condition'] = substr($bracket['sql'], 5);";i:1154;s:24:"                } else {";i:1155;s:61:"                    $criteria['condition'] = $bracket['sql'];";i:1156;s:17:"                }";i:1157;s:0:"";i:1158;s:88:"                $params = isset($postedParams['params']) ? $postedParams['params'] : [];";i:1159;s:0:"";i:1160;s:61:"                ## special params case, query from datafilter";i:1161;s:60:"                if (isset($postedParams[':dataFilterID'])) {";i:1162;s:89:"                    $bracket['params'][':dataFilterID'] = $postedParams[':dataFilterID'];";i:1163;s:17:"                }";i:1164;s:0:"";i:1165;s:79:"                $criteria['params'] = array_merge($params, $bracket['params']);";i:1166;s:47:"            } else if ($bracket['sql'] == '') {";i:1167;s:46:"                unset($criteria['condition']);";i:1168;s:13:"            }";i:1169;s:9:"        }";i:1170;s:82:"        $criteria['distinct'] = (@$criteria['distinct'] == 'true' ? true : false);";i:1171;s:41:"        if (isset($criteria['paging'])) {";i:1172;s:39:"            unset($criteria['paging']);";i:1173;s:9:"        }";i:1174;s:0:"";i:1175;s:70:"        if (isset($criteria['select']) && $criteria['select'] == '') {";i:1176;s:39:"            unset($criteria['select']);";i:1177;s:9:"        }";i:1178;s:0:"";i:1179;s:41:"        foreach ($criteria as $k => $m) {";i:1180;s:32:"            if (is_string($m)) {";i:1181;s:50:"                $criteria[$k] = stripcslashes($m);";i:1182;s:13:"            }";i:1183;s:9:"        }";i:1184;s:60:"        $criteria = ActiveRecord::formatCriteria($criteria);";i:1185;s:25:"        return $criteria;";i:1186;s:5:"    }";i:1187;s:0:"";i:1188;s:45:"    public function getPostName($mode = '') {";i:1189;s:77:"        if ($this->relationTo == '' || $this->relationTo == 'currentModel') {";i:1190;s:39:"            return $this->name . $mode;";i:1191;s:16:"        } else {";i:1192;s:83:"            $name = str_replace($this->name, $this->relationTo, $this->renderName);";i:1193;s:0:"";i:1194;s:30:"            if ($mode != '') {";i:1195;s:63:"                $name = substr_replace($name, $mode . ']', -1);";i:1196;s:13:"            }";i:1197;s:25:"            return $name;";i:1198;s:9:"        }";i:1199;s:5:"    }";i:1200;s:0:"";i:1201;s:7:"    /**";i:1202;s:63:"     * @return array me-return array javascript yang di-include";i:1203;s:7:"     */";i:1204;s:33:"    public function includeJS() {";i:1205;s:34:"        return ['data-source.js'];";i:1206;s:5:"    }";i:1207;s:0:"";i:1208;s:47:"    private function prepareGeneratedParams() {";i:1209;s:23:"        $where  = null;";i:1210;s:23:"        $paging = null;";i:1211;s:23:"        $order  = null;";i:1212;s:65:"        if ($this->relationTo == '' || $this->postData == 'No') {";i:1213;s:49:"            if (!isset($this->params['where'])) {";i:1214;s:122:"                $where                 = $this->builder->findField(['datasource' => $this->name, 'type' => 'DataFilter']);";i:1215;s:37:"                if(is_array($where)){";i:1216;s:60:"                    $this->params['where'] = $where['name'];";i:1217;s:24:"                } else {";i:1218;s:50:"                    $this->params['where'] = null;";i:1219;s:17:"                }";i:1220;s:16:"                ";i:1221;s:13:"            }";i:1222;s:0:"";i:1223;s:84:"            if (!isset($this->params['order']) || !isset($this->params['paging'])) {";i:1224;s:54:"                if (!isset($this->params['paging'])) {";i:1225;s:125:"                    $paging                 = $this->builder->findField(['datasource' => $this->name, 'type' => 'GridView']);";i:1226;s:42:"                    if(is_array($paging)){";i:1227;s:66:"                        $this->params['paging'] = $paging['name'];";i:1228;s:28:"                    } else {";i:1229;s:55:"                        $this->params['paging'] = null;";i:1230;s:21:"                    }";i:1231;s:20:"                    ";i:1232;s:17:"                }";i:1233;s:0:"";i:1234;s:53:"                if (!isset($this->params['order'])) {";i:1235;s:34:"                    if ($paging) {";i:1236;s:41:"                        $order = $paging;";i:1237;s:28:"                    } else {";i:1238;s:112:"                        $order = $this->builder->findField(['datasource' => $this->name, 'type' => 'GridView']);";i:1239;s:21:"                    }";i:1240;s:41:"                    if(is_array($order)){";i:1241;s:64:"                        $this->params['order'] = $order['name'];";i:1242;s:28:"                    } else {";i:1243;s:54:"                        $this->params['order'] = null;";i:1244;s:21:"                    }";i:1245;s:20:"                    ";i:1246;s:17:"                }";i:1247;s:13:"            }";i:1248;s:9:"        }";i:1249;s:16:"        return [";i:1250;s:31:"            'where'  => $where,";i:1251;s:32:"            'paging' => $paging,";i:1252;s:30:"            'order'  => $order";i:1253;s:10:"        ];";i:1254;s:5:"    }";i:1255;s:0:"";i:1256;s:7:"    /**";i:1257;s:13:"     * render";i:1258;s:54:"     * Fungsi ini untuk me-render field dan atributnya";i:1259;s:86:"     * @return mixed me-return sebuah field dan atribut checkboxlist dari hasil render";i:1260;s:7:"     */";i:1261;s:30:"    public function render() {";i:1262;s:26:"        $execQuery = true;";i:1263;s:51:"        $gParams = $this->prepareGeneratedParams();";i:1264;s:8:"        ";i:1265;s:105:"        $field = $this->builder->findField(['datasource'=>$this->name, 'type'=> 'DataFilter']); // filter";i:1266;s:44:"        if (isset($this->params['where'])) {";i:1267;s:36:"            if ($gParams['where']) {";i:1268;s:43:"                $field = $gParams['where'];";i:1269;s:20:"            } else {";i:1270;s:87:"                $field = $this->builder->findField(['name' => $this->params['where']]);";i:1271;s:13:"            }";i:1272;s:9:"        }";i:1273;s:0:"";i:1274;s:21:"        if ($field) {";i:1275;s:47:"            foreach ($field['filters'] as $f) {";i:1276;s:93:"                $dateCondition = @$f['defaultOperator'] != '' && @$f['filterType'] == 'date';";i:1277;s:66:"                if (@$f['defaultValue'] != '' || $dateCondition ||";i:1278;s:84:"                        @$f['defaultValueFrom'] != '' || @$f['defaultValueTo'] != ''";i:1279;s:19:"                ) {";i:1280;s:39:"                    $execQuery = false;";i:1281;s:17:"                }";i:1282;s:13:"            }";i:1283;s:9:"        }";i:1284;s:0:"";i:1285;s:87:"        if ($execQuery && ($this->execMode == 'before' || $this->execMode == 'auto')) {";i:1286;s:46:"            if ($this->execMode == 'before') {";i:1287;s:38:"                $this->processQuery();";i:1288;s:50:"            } else if ($this->execMode == 'auto'){";i:1289;s:47:"                foreach ($this->params as $p) {";i:1290;s:50:"                    if (strpos($p, 'js:') === 0) {";i:1291;s:43:"                        $execQuery = false;";i:1292;s:21:"                    }";i:1293;s:17:"                }";i:1294;s:16:"                ";i:1295;s:33:"                if ($execQuery) {";i:1296;s:42:"                    $this->processQuery();";i:1297;s:17:"                }";i:1298;s:13:"            }";i:1299;s:16:"        } else {";i:1300;s:27:"            $this->data = [";i:1301;s:31:"                'data'   => [],";i:1302;s:30:"                'count'  => 0,";i:1303;s:42:"                'params' => $this->params,";i:1304;s:31:"                'debug'  => '',";i:1305;s:30:"                'rel'    => ''";i:1306;s:14:"            ];";i:1307;s:9:"        }";i:1308;s:8:"        ";i:1309;s:41:"        if ($this->cacheQuery == 'Yes') {";i:1310;s:30:"            $this->setCache();";i:1311;s:9:"        }";i:1312;s:0:"";i:1313;s:60:"        return $this->renderInternal('template_render.php');";i:1314;s:5:"    }";i:1315;s:0:"";i:1316;s:32:"    public function setCache() {";i:1317;s:50:"        if (!isset($GLOBALS['dataSourceCache'])) {";i:1318;s:67:"            $GLOBALS['dataSourceCache'][$this->name] = $this->data;";i:1319;s:9:"        }";i:1320;s:5:"    }";i:1321;s:0:"";i:1322;s:36:"    public function processQuery() {";i:1323;s:39:"        if (is_string($this->params)) {";i:1324;s:31:"            $this->params = [];";i:1325;s:9:"        }";i:1326;s:0:"";i:1327;s:65:"        if ($this->relationTo == '' || $this->postData == 'No') {";i:1328;s:32:"            ## without relatedTo";i:1329;s:39:"            switch ($this->fieldType) {";i:1330;s:27:"                case "sql":";i:1331;s:61:"                    $data      = $this->query($this->params);";i:1332;s:26:"                    break;";i:1333;s:30:"                case "phpsql":";i:1334;s:63:"                    $this->sql = $this->execute($this->params);";i:1335;s:0:"";i:1336;s:43:"                    if ($this->sql != '') {";i:1337;s:60:"                        $data = $this->query($this->params);";i:1338;s:28:"                    } else {";i:1339;s:33:"                        $data = [";i:1340;s:42:"                            'data'  => [],";i:1341;s:40:"                            'debug' => [";i:1342;s:46:"                                'count'  => 0,";i:1343;s:57:"                                'params' => $this->params";i:1344;s:29:"                            ]";i:1345;s:26:"                        ];";i:1346;s:21:"                    }";i:1347;s:26:"                    break;";i:1348;s:27:"                case "php":";i:1349;s:58:"                    $data = $this->execute($this->params);";i:1350;s:26:"                    break;";i:1351;s:13:"            }";i:1352;s:16:"        } else {";i:1353;s:29:"            ## with relatedTo";i:1354;s:53:"            $data = $this->getRelated($this->params);";i:1355;s:9:"        }";i:1356;s:8:"        ";i:1357;s:23:"        $this->data = [";i:1358;s:39:"            'data'   => @$data['data'],";i:1359;s:49:"            'count'  => @$data['debug']['count'],";i:1360;s:50:"            'params' => @$data['debug']['params'],";i:1361;s:74:"            'debug'  => ($this->debugSql == 'Yes' ? @$data['debug'] : []),";i:1362;s:37:"            'rel'    => @$data['rel']";i:1363;s:10:"        ];";i:1364;s:5:"    }";i:1365;s:0:"";i:1366;s:1:"}";}s:7:"methods";a:19:{s:8:"querySql";a:2:{s:4:"line";i:47;s:6:"length";i:15;}s:5:"query";a:2:{s:4:"line";i:67;s:6:"length";i:53;}s:15:"processSubBlock";a:2:{s:4:"line";i:121;s:6:"length";i:47;}s:16:"generateTemplate";a:2:{s:4:"line";i:169;s:6:"length";i:167;}s:17:"processSQLBracket";a:2:{s:4:"line";i:338;s:6:"length";i:61;}s:9:"concatSql";a:2:{s:4:"line";i:400;s:6:"length";i:20;}s:18:"getFieldProperties";a:2:{s:4:"line";i:424;s:6:"length";i:342;}s:14:"actionRelClass";a:2:{s:4:"line";i:767;s:6:"length";i:15;}s:13:"getPrimaryKey";a:2:{s:4:"line";i:783;s:6:"length";i:18;}s:11:"actionQuery";a:2:{s:4:"line";i:802;s:6:"length";i:97;}s:7:"execute";a:2:{s:4:"line";i:900;s:6:"length";i:43;}s:10:"getRelated";a:2:{s:4:"line";i:944;s:6:"length";i:168;}s:16:"generateCriteria";a:2:{s:4:"line";i:1113;s:6:"length";i:74;}s:11:"getPostName";a:2:{s:4:"line";i:1188;s:6:"length";i:12;}s:9:"includeJS";a:2:{s:4:"line";i:1204;s:6:"length";i:3;}s:22:"prepareGeneratedParams";a:2:{s:4:"line";i:1208;s:6:"length";i:47;}s:6:"render";a:2:{s:4:"line";i:1261;s:6:"length";i:54;}s:8:"setCache";a:2:{s:4:"line";i:1316;s:6:"length";i:5;}s:12:"processQuery";a:2:{s:4:"line";i:1322;s:6:"length";i:43;}}}i:1;N;}